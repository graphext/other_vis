var stream=webpackJsonp_name_([2],{0:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[],u=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],s=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:12,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:"docs",h=0===c.length?0:20,g=u?30:0,p={top:20,right:20,bottom:30+h+g,left:20},m=n.width-p.left-p.right,v=n.height-p.top-p.bottom,x=12,y=o.default.dispatch("selectTopic","deselectTopic"),_=e.map(function(t){return t.name}),b=o.default.nest().key(function(t){return t.name}).rollup(function(t){return t[0].docCount}).map(e),w=o.default.sum(o.default.values(b)),k=o.default.layout.stack().offset("silhouette").order("reverse").values(function(t){return t.points}),A=k(e);e.forEach(function(t){return t.points.forEach(function(t){t.x=o.default.time.format.iso.parse(t.x)})}),a=a&&a.map(o.default.time.format.iso.parse);var L=o.default.time.scale().range([0,m]).domain(a),T=o.default.scale.linear().range([v-2*x,0+x/2]).domain([0,o.default.max(A,function(t){return o.default.max(t.points,function(t){return t.y0+t.y})})]),C=null,E=null;null===i?(C=o.default.scale.category20().domain(_),E=o.default.scale.category20().domain(_.slice(0,d))):(C=o.default.scale.ordinal().domain(o.default.keys(i)).range(o.default.values(i)),E=o.default.scale.ordinal().domain(e.slice(0,d).map(function(t){return t.name})).range(e.slice(0,d).map(function(t){return i[t.name]})));var O=o.default.legend.color().shapeWidth(Math.floor(m/Math.min(e.length,d))-1).orient("horizontal").labelOffset(7).scale(E),B=o.default.svg.axis().scale(L).orient("bottom");null!==l?B.tickFormat(o.default.time.format(l)):B.ticks(m/80);var M=o.default.svg.area().interpolate("basis").x(function(t){return L(t.x)}).y0(function(t){return T(t.y0)}).y1(function(t){return T(t.y0+t.y)}),P=o.default.select(t).select("svg"),z=P.select("g.intervalLayer"),F=P.select("g.areasLayer"),S=P.select("g.textLayer");P.empty()&&(P=o.default.select(t).append("svg").append("g").classed("main-container",!0),z=P.append("g").attr("class","intervalLayer"),F=P.append("g").attr("class","areasLayer"),S=P.append("g").attr("class","textLayer")),o.default.select(t).select("svg").attr("width",m+p.left+p.right).attr("height",v+p.top+p.bottom).select(".main-container").attr("transform","translate("+p.left+","+p.top+")"),P.on("click",function(){y.selectTopic(null)}),F.classed("muted",null!==s);var D=F.selectAll("path.areas").data(A);D.enter().append("path").attr("class",function(){return"areas"}).append("title"),D.attr("class",function(t,e){return"areas topic"+e}).classed("selected",function(t,e){return s===e}).attr("d",function(t){return M(t.points)}).style("fill",function(t){return C(t.name)}).on("mouseover",function(t){K(t.name)}).on("mouseout",function(t){Q(t.name)}).on("click",function(t){y.selectTopic(t.name),o.default.event.stopPropagation()}).select("title").text(function(t){return t.name}),F.on("mouseover",function(){F.classed("muted",!0)}),F.on("mouseout",function(){F.classed("muted",null!==s)});var H=S.selectAll("g.x").data(a);H.enter().append("g").attr("class","x axis"),H.attr("transform","translate( 0 , "+(v+h)+")").call(B);var j=S.selectAll("text.title").data([r]);j.enter().append("text").attr("class","title"),j.attr("x",0).attr("y",0).text(function(t){return t});var W=S.selectAll("g.legend").data([null]);if(W.enter().append("g").attr("class","legend"),W.attr("transform","translate( 0 , "+(v+h-10)+")").call(function(t){t.append("text").attr("x","13"),t.append("rect").attr("fill","#ccc").attr({x:0,y:-10,width:10,height:10})}),u){O.on("cellover",function(t){K(t)}).on("cellout",function(t){Q(t)}).on("cellclick",function(t){y.selectTopic(t),o.default.event.stopPropagation()});var q=S.selectAll("g.colorLegend").data([null]);q.enter().append("g").attr("class","colorLegend").attr("transform","translate( 0 , "+(v+h+25)+")"),q.call(O),q.selectAll("g.legendCells").data([0]),q.on("mouseover",function(){F.classed("muted",!0)}),q.on("mouseout",function(){F.classed("muted",null!==s)})}var I=S.selectAll("g.sections").data([null]);I.enter().append("g").attr("class","sections axis"),I.attr("transform","translate(0, "+(v+h-10)+" )");var N=I.selectAll("text").data(c);N.enter().append("text").attr("x",function(t){return L(o.default.time.format.iso.parse(t.x0))+(L(o.default.time.format.iso.parse(t.x1))-L(o.default.time.format.iso.parse(t.x0)))/2}).attr("title",function(t){return t.text}).text(function(t){return t.name}).on("mouseover",function(t,e){z.selectAll("rect").attr("visibility",function(t,n){return e===n?"visible":"hidden"})}).on("mouseout",function(){z.selectAll("rect").attr("visibility","hidden")});var J=function(t){var e=b[t];W.select("text").text(t+": "+e+" "+f+" ("+o.default.round(100*e/w,1)+"%)"),W.select("rect").attr("fill",C(t)),N.attr("display","none")},R=function(){W.select("text").text(""),W.select("rect").attr("fill","#ccc"),N.attr("display",null)},G=function(t){J(t),F.classed("muted",null!==s);var e=_.indexOf(t);F.select("path.topic"+e).classed("selected",!0)},K=function(t){J(t),F.classed("muted",!0);var e=_.indexOf(t);F.select("path.topic"+e).classed("highlighted",!0)},Q=function(t){null!==s?J(s):R(),F.classed("muted",null===s);var e=_.indexOf(t);F.select("path.topic"+e).classed("highlighted",!1)};return z.selectAll("rect").data(c).enter().append("rect").attr("x",function(t){return L(o.default.time.format.iso.parse(t.x0))}).attr("y",0).attr("width",function(t){return L(o.default.time.format.iso.parse(t.x1))-L(o.default.time.format.iso.parse(t.x0))}).attr("height",v+h).attr("visibility","hidden"),null!==s&&G(s),y}Object.defineProperty(e,"__esModule",{value:!0}),e.histogramFromBuckets=e.computeHistogram=void 0;var l=n(147);Object.defineProperty(e,"computeHistogram",{enumerable:!0,get:function(){return l.computeHistogram}}),Object.defineProperty(e,"histogramFromBuckets",{enumerable:!0,get:function(){return l.histogramFromBuckets}}),e.render=a;var i=n(26),o=r(i);n(148),n(154)},51:function(t,e){t.exports={d3_identity:function(t){return t},d3_mergeLabels:function(t,e){if(0===e.length)return t;t=t?t:[];for(var n=e.length;n<t.length;n++)e.push(t[n]);return e},d3_linearLegend:function(t,e,n){var r=[];if(e.length>1)r=e;else for(var a=t.domain(),l=(a[a.length-1]-a[0])/(e-1),i=0;i<e;i++)r.push(a[0]+i*l);var o=r.map(n);return{data:r,labels:o,feature:function(e){return t(e)}}},d3_quantLegend:function(t,e,n){var r=t.range().map(function(r){var a=t.invertExtent(r);e(a[0]),e(a[1]);return e(a[0])+" "+n+" "+e(a[1])});return{data:t.range(),labels:r,feature:this.d3_identity}},d3_ordinalLegend:function(t){return{data:t.domain(),labels:t.domain(),feature:function(e){return t(e)}}},d3_drawShapes:function(t,e,n,r,a,l){"rect"===t?e.attr("height",n).attr("width",r):"circle"===t?e.attr("r",a):"line"===t?e.attr("x1",0).attr("x2",r).attr("y1",0).attr("y2",0):"path"===t&&e.attr("d",l)},d3_addText:function(t,e,n,r){e.append("text").attr("class",r+"label"),t.selectAll("g."+r+"cell text."+r+"label").data(n).text(this.d3_identity)},d3_calcType:function(t,e,n,r,a,l){var i=t.ticks?this.d3_linearLegend(t,n,a):t.invertExtent?this.d3_quantLegend(t,a,l):this.d3_ordinalLegend(t);return i.labels=this.d3_mergeLabels(i.labels,r),e&&(i.labels=this.d3_reverse(i.labels),i.data=this.d3_reverse(i.data)),i},d3_reverse:function(t){for(var e=[],n=0,r=t.length;n<r;n++)e[n]=t[r-n-1];return e},d3_placement:function(t,e,n,r,a,l){e.attr("transform",n),r.attr("transform",a),"horizontal"===t&&r.style("text-anchor",l)},d3_addEvents:function(t,e){var n=this;t.on("mouseover.legend",function(t){n.d3_cellOver(e,t,this)}).on("mouseout.legend",function(t){n.d3_cellOut(e,t,this)}).on("click.legend",function(t){n.d3_cellClick(e,t,this)})},d3_cellOver:function(t,e,n){t.cellover.call(n,e)},d3_cellOut:function(t,e,n){t.cellout.call(n,e)},d3_cellClick:function(t,e,n){t.cellclick.call(n,e)},d3_title:function(t,e,n,r){if(""!==n){var a=t.selectAll("text."+r+"legendTitle");a.data([n]).enter().append("text").attr("class",r+"legendTitle"),t.selectAll("text."+r+"legendTitle").text(n);var l=t.select("."+r+"legendTitle").map(function(t){return t[0].getBBox().height})[0],i=-e.map(function(t){return t[0].getBBox().x})[0];e.attr("transform","translate("+i+","+(l+10)+")")}}}},147:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n,r){function a(t,e,n){for(var r=[],a=0;a<t;a++)r.push({x:n+a*e,y:0,docs:[]});return r}for(var l=(e-n)/r,i=a(r,l,n),o=0;o<t.length;o++){var c=t[o],u=Math.min(Math.floor((c.date-n)/l),r-1);i[u].y+=1,i[u].docs.push(c.id)}return i}function l(t,e){var n=t.map(function(t){return{category:t.community&&t.community.id||0,color:t.community&&t.community.color||3003,date:Number(new Date(t.date)),id:t.id}});n=n.sort(function(t,e){return t.date<e.date?-1:1});var r=n[0].date,l=n[n.length-1].date,i={},o={},c=!0,u=!1,s=void 0;try{for(var d,f=n[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var h=d.value,g=h.category;g in i?i[g].push(h):(i[g]=[h],o[g]="#"+h.color.toString(16))}}catch(t){u=!0,s=t}finally{try{!c&&f.return&&f.return()}finally{if(u)throw s}}var p=[];for(var m in i)p.push({name:m,points:a(i[m],l,r,e),docCount:i[m].length});return p=p.sort(function(t,e){return e.docCount-t.docCount}),{xMin:r,xMax:l,colors:o,data:p}}function i(t){function e(t,e){var n=new Set;t.forEach(function(t){t.points.forEach(function(t){n.add(t.x)})}),n=Array.from(n).sort();var r=[],a=n[0];return n.forEach(function(t){for(;t-a>e;)r.push(a+e),a+=e;r.push(t),a=t}),r}function n(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=[];n=n||1/0,n*=1e3;var i=null===r?e(t,n):r;return t.forEach(function(t){var e=[];l.push({name:t.name,points:e,tweetIds:t.tweetIds,color:t.color});var n=0;i.forEach(function(r){n<t.points.length&&r===t.points[n].x?(e.push(t.points[n]),n+=1):e.push({x:r,y:a})})}),{data:l,xTicks:i}}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.forEach(function(t){t.points.forEach(function(t){return t.x=Number(new Date(t.x))})});var a=n(t,r),l=a.data,i=a.xTicks,o=i[0],u=i[i.length-1],s={};l.forEach(function(t){t.docCount=c.default.sum(t.points,function(t){return t.y})}),l=l.sort(function(t,e){return e.docCount-t.docCount});var d=l.map(function(t){return t.name}),f=l.map(function(t){return t.color}),h=c.default.scale.category20().domain(d);return d.forEach(function(t,e){return s[t]=f[e]||h(t)}),{xMin:o,xMax:u,colors:s,data:l}}Object.defineProperty(e,"__esModule",{value:!0}),e.computeHistogram=l,e.histogramFromBuckets=i;var o=n(26),c=r(o)},148:function(t,e,n){var r=n(26);r.legend=n(149),t.exports=r},149:function(t,e,n){t.exports={color:n(150),size:n(151),symbol:n(152)}},150:function(t,e,n){var r=n(51);t.exports=function(){function t(t){var b=r.d3_calcType(n,y,u,s,g,v),w=t.selectAll("g").data([n]);w.enter().append("g").attr("class",d+"legendCells");var k=w.selectAll("."+d+"cell").data(b.data),A=k.enter().append("g",".cell").attr("class",d+"cell").style("opacity",1e-6),L=(A.append(a).attr("class",d+"swatch"),k.select("g."+d+"cell "+a));r.d3_addEvents(A,_),k.exit().transition().style("opacity",0).remove(),r.d3_drawShapes(a,L,i,l,o,e),r.d3_addText(w,A,b.labels,d);var T=k.select("text"),C=L[0].map(function(t){return t.getBBox()});f?L.attr("class",function(t){return d+"swatch "+b.feature(t)}):"line"==a?L.style("stroke",b.feature):L.style("fill",b.feature);var E,O,B="start"==m?0:"middle"==m?.5:1;"vertical"===x?(E=function(t,e){return"translate(0, "+e*(C[e].height+c)+")"},O=function(t,e){return"translate("+(C[e].width+C[e].x+p)+","+(C[e].y+C[e].height/2+5)+")"}):"horizontal"===x&&(E=function(t,e){return"translate("+e*(C[e].width+c)+",0)"},O=function(t,e){return"translate("+(C[e].width*B+C[e].x)+","+(C[e].height+C[e].y+p+8)+")"}),r.d3_placement(x,k,E,T,O,m),r.d3_title(t,w,h,d),k.transition().style("opacity",1)}var e,n=d3.scale.linear(),a="rect",l=15,i=15,o=10,c=2,u=[5],s=[],d="",f=!1,h="",g=d3.format(".01f"),p=10,m="middle",v="to",x="vertical",y=!1,_=d3.dispatch("cellover","cellout","cellclick");return t.scale=function(e){return arguments.length?(n=e,t):n},t.cells=function(e){return arguments.length?((e.length>1||e>=2)&&(u=e),t):u},t.shape=function(n,r){return arguments.length?(("rect"==n||"circle"==n||"line"==n||"path"==n&&"string"==typeof r)&&(a=n,e=r),t):a},t.shapeWidth=function(e){return arguments.length?(l=+e,t):l},t.shapeHeight=function(e){return arguments.length?(i=+e,t):i},t.shapeRadius=function(e){return arguments.length?(o=+e,t):o},t.shapePadding=function(e){return arguments.length?(c=+e,t):c},t.labels=function(e){return arguments.length?(s=e,t):s},t.labelAlign=function(e){return arguments.length?("start"!=e&&"end"!=e&&"middle"!=e||(m=e),t):m},t.labelFormat=function(e){return arguments.length?(g=e,t):g},t.labelOffset=function(e){return arguments.length?(p=+e,t):p},t.labelDelimiter=function(e){return arguments.length?(v=e,t):v},t.useClass=function(e){return arguments.length?(e!==!0&&e!==!1||(f=e),t):f},t.orient=function(e){return arguments.length?(e=e.toLowerCase(),"horizontal"!=e&&"vertical"!=e||(x=e),t):x},t.ascending=function(e){return arguments.length?(y=!!e,t):y},t.classPrefix=function(e){return arguments.length?(d=e,t):d},t.title=function(e){return arguments.length?(h=e,t):h},d3.rebind(t,_,"on"),t}},151:function(t,e,n){var r=n(51);t.exports=function(){function t(t){var x=r.d3_calcType(n,m,o,c,d,g),y=t.selectAll("g").data([n]);y.enter().append("g").attr("class",u+"legendCells");var _=y.selectAll("."+u+"cell").data(x.data),b=_.enter().append("g",".cell").attr("class",u+"cell").style("opacity",1e-6),w=(b.append(a).attr("class",u+"swatch"),_.select("g."+u+"cell "+a));r.d3_addEvents(b,v),_.exit().transition().style("opacity",0).remove(),"line"===a?(r.d3_drawShapes(a,w,0,l),w.attr("stroke-width",x.feature)):r.d3_drawShapes(a,w,x.feature,x.feature,x.feature,e),r.d3_addText(y,b,x.labels,u);var k,A,L=_.select("text"),T=w[0].map(function(t,e){var r=t.getBBox(),l=n(x.data[e]);return"line"===a&&"horizontal"===p?r.height=r.height+l:"line"===a&&"vertical"===p&&(r.width=r.width),r}),C=d3.max(T,function(t){return t.height+t.y}),E=d3.max(T,function(t){return t.width+t.x}),O="start"==h?0:"middle"==h?.5:1;"vertical"===p?(k=function(t,e){var n=d3.sum(T.slice(0,e+1),function(t){return t.height});return"translate(0, "+(n+e*i)+")"},A=function(t,e){return"translate("+(E+f)+","+(T[e].y+T[e].height/2+5)+")"}):"horizontal"===p&&(k=function(t,e){var n=d3.sum(T.slice(0,e+1),function(t){return t.width});return"translate("+(n+e*i)+",0)"},A=function(t,e){return"translate("+(T[e].width*O+T[e].x)+","+(C+f)+")"}),r.d3_placement(p,_,k,L,A,h),r.d3_title(t,y,s,u),_.transition().style("opacity",1)}var e,n=d3.scale.linear(),a="rect",l=15,i=2,o=[5],c=[],u="",s="",d=d3.format(".01f"),f=10,h="middle",g="to",p="vertical",m=!1,v=d3.dispatch("cellover","cellout","cellclick");return t.scale=function(e){return arguments.length?(n=e,t):n},t.cells=function(e){return arguments.length?((e.length>1||e>=2)&&(o=e),t):o},t.shape=function(n,r){return arguments.length?("rect"!=n&&"circle"!=n&&"line"!=n||(a=n,e=r),t):a},t.shapeWidth=function(e){return arguments.length?(l=+e,t):l},t.shapePadding=function(e){return arguments.length?(i=+e,t):i},t.labels=function(e){return arguments.length?(c=e,t):c},t.labelAlign=function(e){return arguments.length?("start"!=e&&"end"!=e&&"middle"!=e||(h=e),t):h},t.labelFormat=function(e){return arguments.length?(d=e,t):d},t.labelOffset=function(e){return arguments.length?(f=+e,t):f},t.labelDelimiter=function(e){return arguments.length?(g=e,t):g},t.orient=function(e){return arguments.length?(e=e.toLowerCase(),"horizontal"!=e&&"vertical"!=e||(p=e),t):p},t.ascending=function(e){return arguments.length?(m=!!e,t):m},t.classPrefix=function(e){return arguments.length?(u=e,t):u},t.title=function(e){return arguments.length?(s=e,t):s},d3.rebind(t,v,"on"),t}},152:function(t,e,n){var r=n(51);t.exports=function(){function t(t){var y=r.d3_calcType(e,v,c,u,f,p),_=t.selectAll("g").data([e]);_.enter().append("g").attr("class",s+"legendCells");var b=_.selectAll("."+s+"cell").data(y.data),w=b.enter().append("g",".cell").attr("class",s+"cell").style("opacity",1e-6),k=(w.append(n).attr("class",s+"swatch"),b.select("g."+s+"cell "+n));r.d3_addEvents(w,x),b.exit().transition().style("opacity",0).remove(),r.d3_drawShapes(n,k,l,a,i,y.feature),r.d3_addText(_,w,y.labels,s);var A,L,T=b.select("text"),C=k[0].map(function(t){return t.getBBox()}),E=d3.max(C,function(t){return t.height}),O=d3.max(C,function(t){return t.width}),B="start"==h?0:"middle"==h?.5:1;"vertical"===m?(A=function(t,e){return"translate(0, "+e*(E+o)+")"},L=function(t,e){return"translate("+(O+g)+","+(C[e].y+C[e].height/2+5)+")"}):"horizontal"===m&&(A=function(t,e){return"translate("+e*(O+o)+",0)"},L=function(t,e){return"translate("+(C[e].width*B+C[e].x)+","+(E+g)+")"}),r.d3_placement(m,b,A,T,L,h),r.d3_title(t,_,d,s),b.transition().style("opacity",1)}var e=d3.scale.linear(),n="path",a=15,l=15,i=10,o=5,c=[5],u=[],s="",d="",f=d3.format(".01f"),h="middle",g=10,p="to",m="vertical",v=!1,x=d3.dispatch("cellover","cellout","cellclick");return t.scale=function(n){return arguments.length?(e=n,t):e},t.cells=function(e){return arguments.length?((e.length>1||e>=2)&&(c=e),t):c},t.shapePadding=function(e){return arguments.length?(o=+e,t):o},t.labels=function(e){return arguments.length?(u=e,t):u},t.labelAlign=function(e){return arguments.length?("start"!=e&&"end"!=e&&"middle"!=e||(h=e),t):h},t.labelFormat=function(e){return arguments.length?(f=e,t):f},t.labelOffset=function(e){return arguments.length?(g=+e,t):g},t.labelDelimiter=function(e){return arguments.length?(p=e,t):p},t.orient=function(e){return arguments.length?(e=e.toLowerCase(),"horizontal"!=e&&"vertical"!=e||(m=e),t):m},t.ascending=function(e){return arguments.length?(v=!!e,t):v},t.classPrefix=function(e){return arguments.length?(s=e,t):s},t.title=function(e){return arguments.length?(d=e,t):d},d3.rebind(t,x,"on"),t}},154:function(t,e){}});
//# sourceMappingURL=stream.bundle.js.map